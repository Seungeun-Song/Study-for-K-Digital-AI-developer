#admi.py

>@admin.register(Post)
>
>class PostAdmin(admin.ModelAdmin):
>
>  list_display = ('post_id', 'title', 'content', 'photo_list','date','category_title','member_id','tag_list')
>
>  def photo_list(self, obj):
>
>    return ', '.join(o for o in obj.title.all())
>
>  def tag_list(self, obj):
>
>    return ', '.join(o for o in obj.title.all()) 
>
>

def = manytomany로 연결된 것들을 리스트로 담는 함수

​		post테이블에 여러 post를 나열해서 외래키를 붙이는 것에서 오류가 났기 때문.



---

```
Q. 그런데 어떻게 (self, obj)가 photo table과 tag table의 어떤 obj으로 manytomany를 연결한다는 걸 알까?

순서대로 일까?

그러니까 어느 obj이 어느 테이블의 manytomany랑 연결 됐는지 알까?ㄴ
```

* ```
     --> 애매한 로직을 좀 더 명확하게 명명
     
      def photo_list(self, obj):
          return ', '.join(o.title for o in obj.photo_id.all()) # obj.photo_id
      def tag_list(self, obj):
          return ', '.join(o.title for o in obj.tag_id.all()) # obj/tag_id
  ```





---

->  view.py만드는 중 에서 admin의 문제점을 발견했기 떄문에 class만 선언하고 돌려보기로. class를 전부 선언하지 않으면(로직은 없어도 되지만)  migrate가 되지 않아 돌아가지 않는다..??( migrate는 model에만 적용되는 거 아닌가?)

> #view.py
>
> class Post(TemplateView):
>
> ​	pass



```
Q. #admin.py

@admin.register(Member)

class MemberAdmin(admin.ModelAdmin):
    list_display = ('member_id', 'name')
```

* --------> | ^ :문제 |  v:해결 |

  ```
  @admin.register(Member)
  class MemberAdmin(admin.ModelAdmin):
      list_display = ('member_id', 'name', 'category_list')
      def category_list(self, obj):
          return ', '.join(o.title for o in obj.category_id.all())  
  ```



---

> #view.py
>
> model = Member
>
> 
>
> def get_context_data(self, **kwargs):
>
> ​    context = super().get_context_data(**kwargs)
>
> ​    context['member_name'] = self.kwargs['name']
>
> ​    return context
>
> ```
> 해석
> ->  super().get_context_data(**kwargs)
> 모든 멤버super(MemberDetail, self)를 쿼리한 집합을 context 객체에 추가한다.
> -> context['member_name'] = self.kwargs['name']
> member의 name =context['member_name'] 
> ```





---

**검색창을 만들기 위해 admin.py, url.py, view.py를 건드렸더니ㅠㅠㅠ**

![](C:\Users\SONG\multi_campus\Project\인터페이스_프로젝트\project\team_통합\일지\error_picture.png)

Q. 무엇이 문제였을까...??ㄴ